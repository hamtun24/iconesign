(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6435:function(e,t,a){"use strict";a.d(t,{F:function(){return c},f:function(){return d}});var r=a(2265);let s=["light","dark"],n="(prefers-color-scheme: dark)",l="undefined"==typeof window,i=(0,r.createContext)(void 0),o={setTheme:e=>{},themes:[]},c=()=>{var e;return null!==(e=(0,r.useContext)(i))&&void 0!==e?e:o},d=e=>(0,r.useContext)(i)?r.createElement(r.Fragment,null,e.children):r.createElement(m,e),u=["light","dark"],m=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:a=!0,enableColorScheme:l=!0,storageKey:o="theme",themes:c=u,defaultTheme:d=a?"system":"light",attribute:m="data-theme",value:f,children:g,nonce:y})=>{let[v,w]=(0,r.useState)(()=>x(o,d)),[j,N]=(0,r.useState)(()=>x(o)),k=f?Object.values(f):c,S=(0,r.useCallback)(e=>{let r=e;if(!r)return;"system"===e&&a&&(r=p());let n=f?f[r]:r,i=t?b():null,o=document.documentElement;if("class"===m?(o.classList.remove(...k),n&&o.classList.add(n)):n?o.setAttribute(m,n):o.removeAttribute(m),l){let e=s.includes(d)?d:null,t=s.includes(r)?r:e;o.style.colorScheme=t}null==i||i()},[]),E=(0,r.useCallback)(e=>{w(e);try{localStorage.setItem(o,e)}catch(e){}},[e]),_=(0,r.useCallback)(t=>{N(p(t)),"system"===v&&a&&!e&&S("system")},[v,e]);(0,r.useEffect)(()=>{let e=window.matchMedia(n);return e.addListener(_),_(e),()=>e.removeListener(_)},[_]),(0,r.useEffect)(()=>{let e=e=>{e.key===o&&E(e.newValue||d)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[E]),(0,r.useEffect)(()=>{S(null!=e?e:v)},[e,v]);let C=(0,r.useMemo)(()=>({theme:v,setTheme:E,forcedTheme:e,resolvedTheme:"system"===v?j:v,themes:a?[...c,"system"]:c,systemTheme:a?j:void 0}),[v,E,e,j,a,c]);return r.createElement(i.Provider,{value:C},r.createElement(h,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:a,enableColorScheme:l,storageKey:o,themes:c,defaultTheme:d,attribute:m,value:f,children:g,attrs:k,nonce:y}),g)},h=(0,r.memo)(({forcedTheme:e,storageKey:t,attribute:a,enableSystem:l,enableColorScheme:i,defaultTheme:o,value:c,attrs:d,nonce:u})=>{let m="system"===o,h="class"===a?`var d=document.documentElement,c=d.classList;c.remove(${d.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${a}',s='setAttribute';`,x=i?s.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",b=(e,t=!1,r=!0)=>{let n=c?c[e]:e,l=t?e+"|| ''":`'${n}'`,o="";return i&&r&&!t&&s.includes(e)&&(o+=`d.style.colorScheme = '${e}';`),"class"===a?o+=t||n?`c.add(${l})`:"null":n&&(o+=`d[s](n,${l})`),o},p=e?`!function(){${h}${b(e)}}()`:l?`!function(){try{${h}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${m})){var t='${n}',m=window.matchMedia(t);if(m.media!==t||m.matches){${b("dark")}}else{${b("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${b(c?"x[e]":"e",!0)}}${m?"":"else{"+b(o,!1,!1)+"}"}${x}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${t}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${b(c?"x[e]":"e",!0)}}else{${b(o,!1,!1)};}${x}}catch(t){}}();`;return r.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:p}})},()=>!0),x=(e,t)=>{let a;if(!l){try{a=localStorage.getItem(e)||void 0}catch(e){}return a||t}},b=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},p=e=>(e||(e=window.matchMedia(n)),e.matches?"dark":"light")},4341:function(e,t,a){Promise.resolve().then(a.t.bind(a,976,23)),Promise.resolve().then(a.t.bind(a,6390,23)),Promise.resolve().then(a.t.bind(a,2445,23)),Promise.resolve().then(a.bind(a,1976)),Promise.resolve().then(a.bind(a,78)),Promise.resolve().then(a.bind(a,8314))},1976:function(e,t,a){"use strict";a.r(t),a.d(t,{AuthGuard:function(){return f}});var r=a(7437),s=a(2265),n=a(5251),l=a(6264),i=a(9036),o=a(7593),c=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,c.Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var u=a(1981),m=a(1295);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,c.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),x=(0,c.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),b=(0,c.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function p(e){let{onSuccess:t}=e,[a,i]=(0,s.useState)(""),[c,p]=(0,s.useState)(""),[f,g]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!1),{signIn:w,isLoading:j,error:N,clearError:k}=(0,o.t)(),S=async e=>{if(e.preventDefault(),k(),a&&c)try{await w(a,c),null==t||t()}catch(e){}};return(0,r.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-adorable-blue via-adorable-purple to-adorable-pink p-4",children:[(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-white/10 rounded-full blur-3xl"}),(0,r.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-white/10 rounded-full blur-3xl"})]}),(0,r.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"relative w-full max-w-md",children:[(0,r.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8 border border-white/20",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)(n.E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"w-16 h-16 bg-gradient-to-r from-adorable-blue to-adorable-purple rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(d,{className:"w-8 h-8 text-white"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Connexion"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Acc\xe9dez \xe0 votre espace de traitement des factures"})]}),N&&(0,r.jsxs)(n.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3",children:[(0,r.jsx)(u.Z,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-red-700 text-sm",children:N})]}),(0,r.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"text",className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse email"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(m.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{id:"email",type:"text",value:a,onChange:e=>{i(e.target.value),N&&k()},className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-adorable-blue focus:border-transparent transition-colors",placeholder:"votre@email.com",required:!0,disabled:j})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(h,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{id:"password",type:f?"text":"password",value:c,onChange:e=>{p(e.target.value),N&&k()},className:"block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-adorable-blue focus:border-transparent transition-colors",placeholder:"••••••••",required:!0,disabled:j}),(0,r.jsx)("button",{type:"button",onClick:()=>g(!f),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:j,children:f?(0,r.jsx)(x,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):(0,r.jsx)(b,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:y,onChange:e=>v(e.target.checked),className:"rounded border-gray-300 text-adorable-blue focus:ring-adorable-blue",disabled:j}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Se souvenir de moi"})]}),(0,r.jsx)("button",{type:"button",className:"text-sm text-adorable-blue hover:text-adorable-purple transition-colors",disabled:j,children:"Mot de passe oubli\xe9 ?"})]}),(0,r.jsx)(n.E.button,{type:"submit",disabled:j||!a||!c,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-adorable-blue to-adorable-purple text-white py-3 px-4 rounded-lg font-medium shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{className:"w-5 h-5 animate-spin"}),(0,r.jsx)("span",{children:"Connexion en cours..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"Se connecter"})]})})]}),(0,r.jsx)("div",{className:"mt-8 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Pas encore de compte ?"," ",(0,r.jsx)("button",{className:"text-adorable-blue hover:text-adorable-purple font-medium transition-colors",children:"Contactez l'administrateur"})]})})]}),(0,r.jsx)(n.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mt-6 text-center text-white/80 text-sm",children:(0,r.jsx)("p",{children:"\uD83D\uDD12 Connexion s\xe9curis\xe9e avec chiffrement SSL"})})]})]})}function f(e){let{children:t}=e,{isAuthenticated:a,isLoading:c,checkAuth:d,user:u}=(0,o.t)(),[m,h]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{await d(),h(!1)})()},[d]),m||c)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-adorable-blue via-adorable-purple to-adorable-pink",children:(0,r.jsxs)(n.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center text-white",children:[(0,r.jsx)(n.E.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4",children:(0,r.jsx)(l.Z,{className:"w-16 h-16"})}),(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"V\xe9rification de l'authentification"}),(0,r.jsx)("p",{className:"text-white/80",children:"Veuillez patienter..."})]})}):a?u&&!u.hasCredentials?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-adorable-blue via-adorable-purple to-adorable-pink p-4",children:(0,r.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8 border border-white/20 max-w-md w-full text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(i.Z,{className:"w-8 h-8 text-white"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Configuration requise"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Vos identifiants TTN et ANCE SEAL ne sont pas configur\xe9s. Veuillez contacter l'administrateur pour configurer vos acc\xe8s."}),(0,r.jsxs)("div",{className:"space-y-3 text-sm text-gray-500",children:[(0,r.jsx)("p",{children:"✓ Compte utilisateur cr\xe9\xe9"}),(0,r.jsx)("p",{children:"✗ Identifiants TTN manquants"}),(0,r.jsx)("p",{children:"✗ Identifiants ANCE SEAL manquants"})]}),(0,r.jsx)("button",{onClick:()=>o.t.getState().signOut(),className:"mt-6 px-4 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:"Se d\xe9connecter"})]})}):(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsx)(p,{onSuccess:()=>window.location.reload()})}},78:function(e,t,a){"use strict";a.r(t),a.d(t,{ThemeProvider:function(){return n}});var r=a(7437);a(2265);var s=a(6435);function n(e){let{children:t,...a}=e;return(0,r.jsx)(s.f,{...a,children:t})}},8314:function(e,t,a){"use strict";a.r(t),a.d(t,{Toaster:function(){return l}});var r=a(7437),s=a(6435),n=a(1424);let l=e=>{let{...t}=e,{theme:a="system"}=(0,s.F)();return(0,r.jsx)(n.x7,{theme:a,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})}},7593:function(e,t,a){"use strict";a.d(t,{t:function(){return n}});var r=a(4660),s=a(4810);let n=(0,r.Ue)()((0,s.tJ)((e,t)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,signIn:async(t,a)=>{e({isLoading:!0,error:null});try{let r=await fetch("".concat("https://itchy-cars-march.loca.lt/api/v1","/auth/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usernameOrEmail:t,password:a})}),s=await r.json();if(!r.ok)throw Error(s.message||"Erreur de connexion");if(s.success&&s.data){let{token:t,...a}=s.data;e({user:a,token:t,isAuthenticated:!0,isLoading:!1,error:null}),localStorage.setItem("auth_token",t)}else throw Error(s.message||"R\xe9ponse invalide du serveur")}catch(t){throw console.error("Sign in error:",t),e({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:t instanceof Error?t.message:"Erreur de connexion inconnue"}),t}},signOut:()=>{localStorage.removeItem("auth_token"),e({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null})},clearError:()=>{e({error:null})},checkAuth:async()=>{let t=localStorage.getItem("auth_token");if(!t){e({isAuthenticated:!1,user:null,token:null});return}e({isLoading:!0});try{let a=await fetch("".concat("https://itchy-cars-march.loca.lt/api/v1","/auth/me"),{headers:{Authorization:"Bearer ".concat(t)}});if(!a.ok)throw Error("Token invalide");let r=await a.json();if(r.success&&r.data)e({user:r.data,token:t,isAuthenticated:!0,isLoading:!1,error:null});else throw Error("Donn\xe9es utilisateur invalides")}catch(t){console.error("Auth check error:",t),localStorage.removeItem("auth_token"),e({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null})}}}),{name:"auth-storage",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))},2445:function(){},976:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c",variable:"__variable_e8ce0c"}},6390:function(e){e.exports={style:{fontFamily:"'__Poppins_51684b', '__Poppins_Fallback_51684b'",fontStyle:"normal"},className:"__className_51684b",variable:"__variable_51684b"}}},function(e){e.O(0,[216,971,938,744],function(){return e(e.s=4341)}),_N_E=e.O()}]);